<!-- views/partials/tasks.ejs -->
<div class="card">
  <h2><i class="bi bi-list-task"></i> Today's Tasks</h2>

  <!-- Additional filter buttons for buckets if needed -->
  <!-- Bucket Filter Buttons -->
<!-- Bucket Filter Buttons -->
<!-- Bucket Filter Buttons -->
<div class="bucket-switcher my-3">
  <button class="bucket-filter-button active" data-bucket="all"
    onclick="filterContent('all', 'bucket', this)">All</button>

  <% if (planBuckets && Object.keys(planBuckets).length > 0) { %>
    <% Object.keys(planBuckets).forEach(planType => { %>
      <% planBuckets[planType].forEach((bucket, index) => { %>
        <button class="bucket-filter-button" data-bucket="<%= bucket %>" data-plan-type="<%= planType %>"
          onclick="filterContent('<%= bucket %>', 'bucket', this)">
          <%= bucket %>
        </button>
      <% }) %>
    <% }) %>
  <% } else { %>
    <p class="no-buckets">No buckets available.</p>
  <% } %>
</div>



  <ul class="list-unstyled">
    <% tasks.forEach(task=> { %>
      <li class="task-section d-flex align-items-center mb-2" style="gap: 8px;"
        data-task-type="<%= task.dataTaskType %>" data-bucket="<%= task.bucketName %>">

        <!-- Colored bullet associated with task type -->
        <span class="bullet bullet-<%= task.dataTaskType %>"></span>

        <i class="bi <%= task.status === 'completed'
          ? 'bi-check-circle-fill text-success'
          : 'bi-check-circle'
        %>"></i>

        <span>
          <%= task.title %>
            <small>(<%= task.bucketName %>)</small>
        </span>
      </li>
      <% }) %>
  </ul>
</div>